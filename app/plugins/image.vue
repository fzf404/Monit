<!--
 * @Author: fzf404
 * @Date: 2022-05-25 23:18:50
 * @LastEditors: fzf404 me@fzf404.art
 * @LastEditTime: 2023-03-28 22:14:23
 * @Description: image 图像展示
-->

<template>
  <!-- 设置-->
  <Setting :store="store" :setting="setting" />
  <!-- 页面内容 -->
  <article class="flex-col-center">
    <img class="h-full w-full rounded-lg" :class="store.scaleType" :src="store.src" alt="图像" />
  </article>
</template>

<script setup>
import { reactive } from 'vue'

import { callEvent } from '~/event/send'
import { storage } from '~/lib/storage'

import Setting from '@/components/setting.vue'

// 存储数据
const store = storage({
  src: 'https://img.fzf404.art/monit/logo.webp',
  scaleType: 'object-contain'
})

// 打开本地图像
const openLocalImage = () => {
  const local = callEvent('open-image')
  if (local) {
    store.src = 'file://' + local
  }
}

// 设置项
const setting = reactive([
  {
    id: 'src',
    label: '图像链接',
    type: 'text'
  },
  {
    label: '本地图像',
    type: 'button',
    options: {
      text: '浏 览',
      click: () => openLocalImage()
    }
  },
  {
    id: 'scaleType',
    label: '缩放模式',
    type: 'select',
    options: [
      {
        label: '原始',
        value: 'object-contain'
      },
      {
        label: '裁剪',
        value: 'object-cover'
      },
      {
        label: '拉伸',
        value: 'object-fill'
      }
    ]
  }
])
</script>
